import{r as n,j as e,C as N,h as E,i as y,a as S,c as b,p as u}from"./index-9rlOlUzo.js";const v=()=>{const[d,l]=n.useState("Pendiente"),[i,h]=n.useState([]),[c,r]=n.useState([]),[m,g]=n.useState(!1),[j,x]=n.useState(null),[f,a]=n.useState({}),p=async()=>{g(!0),x(null),a({});try{console.log("üß™ Iniciando pruebas del backend..."),console.log("üè• Probando health check...");try{const s=await u.healthCheck();l(s?"‚úÖ Conectado":"‚ùå No conectado"),a(o=>({...o,health:s})),console.log("Health check result:",s)}catch(s){console.error("‚ùå Error en health check:",s),l("‚ùå Error en health check"),a(o=>({...o,health:!1,healthError:s}))}console.log("üìã Probando obtenci√≥n de roles...");try{const o=(await u.getUnique()).map(t=>t.rol);h(o),a(t=>({...t,roles:o})),console.log("Roles encontrados:",o)}catch(s){console.error("‚ùå Error obteniendo roles:",s),x(`Error obteniendo roles: ${s instanceof Error?s.message:"Desconocido"}`),a(o=>({...o,roles:[],rolesError:s}))}console.log("üë• Probando obtenci√≥n de seniorities...");try{const o=(await u.getSeniorities()).map(t=>t.seniority);r(o),a(t=>({...t,seniorities:o})),console.log("Seniorities encontrados:",o)}catch(s){console.error("‚ùå Error obteniendo seniorities:",s),x(`Error obteniendo seniorities: ${s instanceof Error?s.message:"Desconocido"}`),a(o=>({...o,seniorities:[],senioritiesError:s}))}console.log("üìä Probando obtenci√≥n de todos los perfiles...");try{const s=await u.getAll();a(o=>({...o,allPerfiles:s.length})),console.log("Total de perfiles encontrados:",s.length)}catch(s){console.error("‚ùå Error obteniendo todos los perfiles:",s),a(o=>({...o,allPerfiles:0,allPerfilesError:s}))}console.log("‚úÖ Todas las pruebas completadas")}catch(s){console.error("‚ùå Error general en las pruebas:",s);const o=s instanceof Error?s.message:"Error desconocido";x(o)}finally{g(!1)}};return n.useEffect(()=>{p()},[]),e.jsxs(N,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(E,{children:e.jsx(y,{children:"üß™ Pruebas del Backend"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Estado del servidor:"}),e.jsx("span",{className:d.includes("‚úÖ")?"text-green-600":"text-red-600",children:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("span",{className:"font-medium",children:["Roles encontrados (",i.length,"):"]}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-sm",children:i.length>0?e.jsx("ul",{className:"list-disc list-inside",children:i.map((s,o)=>e.jsx("li",{children:s},o))}):e.jsx("span",{className:"text-gray-500",children:"No se encontraron roles"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("span",{className:"font-medium",children:["Seniorities encontrados (",c.length,"):"]}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-sm",children:c.length>0?e.jsx("ul",{className:"list-disc list-inside",children:c.map((s,o)=>e.jsx("li",{children:s},o))}):e.jsx("span",{className:"text-gray-500",children:"No se encontraron seniorities"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Resultados detallados:"}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-sm",children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(f,null,2)})})]}),j&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[e.jsx("span",{className:"text-red-800 font-medium",children:"Error:"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:j})]}),e.jsx(b,{onClick:p,disabled:m,className:"w-full",children:m?"Probando...":"Reintentar Pruebas"})]})]})},P=()=>{const[d,l]=n.useState("Pendiente"),[i,h]=n.useState(!1),c=async()=>{h(!0);try{console.log("üß™ Probando conexi√≥n b√°sica...");const r=await fetch("http://localhost:3001/api/test");if(console.log("üì° Response status:",r.status),r.ok){const m=await r.json();console.log("‚úÖ Datos recibidos:",m),l("‚úÖ Conexi√≥n exitosa")}else console.error("‚ùå Error HTTP:",r.status),l(`‚ùå Error HTTP: ${r.status}`)}catch(r){console.error("‚ùå Error de conexi√≥n:",r),l(`‚ùå Error: ${r instanceof Error?r.message:"Desconocido"}`)}finally{h(!1)}};return n.useEffect(()=>{c()},[]),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Prueba B√°sica de Conexi√≥n"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Estado: "}),e.jsx("span",{className:d.includes("‚úÖ")?"text-green-600":"text-red-600",children:d})]}),e.jsx(b,{onClick:c,disabled:i,size:"sm",children:i?"Probando...":"Reintentar"})]})};function k(){return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Diagn√≥stico del Backend"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(P,{}),e.jsx(v,{})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"üìã Instrucciones de Diagn√≥stico:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Abre la consola del navegador (F12)"}),e.jsx("li",{children:"Revisa los mensajes de log en la consola"}),e.jsx("li",{children:"Verifica el estado de las pruebas arriba"}),e.jsx("li",{children:"Si hay errores, comp√°rtelos para diagn√≥stico"})]})]})]})})}export{k as default};
